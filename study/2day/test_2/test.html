<!DOCTYPE html>
<html>
    <head>
        <title>
            second lecture #1 - My Bucket Lists
        </title>
        <link rel="stylesheet" href="./css/common.css" />
        <link rel="stylesheet" href="./css/bucketList.css" />
        <link rel="stylesheet" href="./css/copyright.css" />
        <script>
            const setup = () => {
                const bucketListItems = document.getElementsByClassName("bucket-list-item");
                [...bucketListItems].forEach(item => {
                    item.addEventListener("click", checkedFn);
                });
            };

            const checkedFn = (event) => {
                const { target } = event;
                let classList = target.classList;
                if (!classList.contains("bucket-list-item")) {
                    classList = target.parentElement.classList;
                }
                classList.toggle("is_checked");
            };

            const itemAppend = () => {
                const itemAppendor = document.getElementById("itemAppendor");
                if (itemAppendor.classList.contains("state_disabled")) {
                    return;
                }
                
                const bucketList = document.getElementById("bucketList");
                const text = prompt("todo input");
                if (!text) {
                    return;
                }

                
                const itemRemover = document.getElementById("itemRemover");
                if (itemRemover.classList.contains("state_disabled")) {
                    itemRemover.classList.add("color_removal");
                    itemRemover.classList.remove("state_disabled");
                }

                const bucketItem = getBucketItem(text);
                bucketList.appendChild(bucketItem);
                if (bucketList.children.length === 10) {
                    itemAppendor.classList.remove("color_addition");
                    itemAppendor.classList.add("state_disabled");
                    return;
                }
            };

            const getBucketItem = text => {
                const item = createElement("LI");
                const checkBox = createElement("DIV");
                const label = createElement("DIV");
                label.classList.add("cc_checkbox_label", "size_w_90Per");
                label.innerText = text;
                checkBox.classList.add("cc_checkbox", "size_20-20");
                item.classList.add("bucket-list-item");
                item.appendChild(checkBox);
                item.appendChild(label);
                item.addEventListener("click", checkedFn);
                return item;
            };

            const createElement = (type) => document.createElement(type);

            const itemPop = () => {
                const itemRemover = document.getElementById("itemRemover");
                const bucketList = document.getElementById("bucketList");
                let targetIndex = bucketList.children.length;
                if (targetIndex === 0) {
                    return;
                } 

                
                const itemAppendor = document.getElementById("itemAppendor");
                if (itemAppendor.classList.contains("state_disabled")) {
                    itemAppendor.classList.add("color_addition");
                    itemAppendor.classList.remove("state_disabled");
                }

                targetIndex--;
                bucketList.removeChild(bucketList.children[targetIndex]);
                if (targetIndex === 0 ) {
                    itemRemover.classList.remove("color_removal");
                    itemRemover.classList.add("state_disabled");
                }

            };

        </script>
    </head>
    <body onload="setup()">
        <div class="wrap main_font">
            <section class="box">
                <header class="box-header">
                    <h2 class="box-header-title">
                        My Bucket List<br />
                        2022-10-20
                    </h2>
                    <div class="cc_buttonbox sort_right">
                        <button
                            class="color_addition" 
                            type="button"
                            id="itemAppendor"
                            onclick="itemAppend()"
                        >
                            + ADD
                        </button>
                        <button
                            class="color_removal" 
                            type="button"
                            id="itemRemover"
                            onclick="itemPop()"
                        >
                            - REMOVE
                        </button>
                    </div>
                </header>
                <article class="box-contents">
                    <ul 
                        class="bucket-list"
                        id="bucketList"
                    >
                        <li class="bucket-list-item">
                            <div class="cc_checkbox size_20-20"></div>
                            <div class="cc_checkbox_label size_w_90Per">
                                Travel all around the world
                            </div>
                        </li>
                        <li class="bucket-list-item">
                            <div class="cc_checkbox size_20-20"></div>
                            <div class="cc_checkbox_label size_w_90Per">
                                223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213223nwjifnwoenbfireb2fu9bg923b9213
                            </div>
                        </li>
                        <li class="bucket-list-item">
                            <div class="cc_checkbox size_20-20"></div>
                            <div class="cc_checkbox_label size_w_90Per">
                                Try a profession in a different field
                            </div>
                        </li>
                        <li class="bucket-list-item">
                            <div class="cc_checkbox size_20-20"></div>
                            <div class="cc_checkbox_label size_w_90Per">
                                Achieve your ideal weight
                            </div>
                        </li>
                        <li class="bucket-list-item">
                            <div class="cc_checkbox size_20-20"></div>
                            <div class="cc_checkbox_label size_w_90Per">
                                Run a marathon
                            </div>
                        </li>
                    </ul>
                </article>
            </section>
            <footer class="footer">
                <div class="copyright">
                    <header class="copyright-header">
                        <z class="copyright-header-title">
                            &#169; 2022 GlennLee
                        </p>
                    </header>
                </div>
            </footer>
        </div>
    </body>
</html>
